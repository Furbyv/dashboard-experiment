<div class="grid-container">
  <gridster
    default-options
    [editable]="editable"
    class="grid"
    *ngIf="dashboard$ | async as dashboard"
  >
    <gridster-item
      [item]="item.position"
      *ngFor="let item of dashboard$ | async; trackBy: trackBy"
      (itemChange)="itemChange($event.item, $event.itemComponent)"
    >
      <div class="item-container">
        <mat-card class="item-content">
          <app-card-template class="item" [template]="item"></app-card-template>
          <div class="item-action-bar" *ngIf="editable">
            <span></span>
            <button
              mat-icon-button
              color="accent"
              aria-label="Delete selected card button"
              (mousedown)="$event.stopPropagation()"
              (touchstart)="$event.stopPropagation()"
              (click)="removeItem(item, dashboard)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </mat-card>
      </div>
    </gridster-item>
  </gridster>

  <app-grid-action-bar
    *ngIf="dashboard$ | async as dashboard"
    class="action-bar"
    (addItem)="addItem(dashboard)"
    (isEditable)="toggleEditMode($event)"
  ></app-grid-action-bar>
</div>
